{% extends "base.html" %}
{% block content %}

<h2>{{ book.title }}</h2>
<div class="row w60 center bookelement">
    <div class="col w20 txtcenter cover">
        {% if book.cover %}
            <img src="{{ url_for('books.cover_get', book_id=book.id) }}" width="90px" alt="{{ book.title }}" />
            <br />
            <a class="icon icon-bracket2" href="{{ url_for('books.cover_delete', book_id=book.id) }}"
            >{{ _("Delete the cover for you book") }}
            </a>
        {% else %}
            <a class="icon icon-bracket2" href="{{ url_for('books.cover_add', book_id=book.id) }}"
            >{{ _("Add a cover for your book") }}
            </a>
        {% endif %}
    </div>
    <div class="col w20 bookexports">
        <ul>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='epub') }}"
                >{{ _("Export Epub2") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='epub3') }}"
                >{{ _("Export Epub3") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='markdown') }}"
                >{{ _("Export Markdown") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='docx') }}"
                >{{ _("Export Word") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='odt') }}"
                >{{ _("Export LibreOffice") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='html') }}"
                >{{ _("Export HTML") }}
                </a>
            </li>
        </ul>
    </div>
    <div class="col w20 booksinfo">
        <ul>
            <li class="row">
                <em class="icon icon-bracket2">{% trans %}Created the {% endtrans %}
                {{ book.creation_date.strftime(' %d/%m/%Y  %H:%M') }}
            </em></li>
            <li class="row">
                <em class="icon icon-bracket2">{% trans %}Last modified at {% endtrans %}
                {{ book.modified_at.strftime(' %d/%m/%Y  %H:%M') }}
            </em></li>
        <ul>
    </div>
</div>

{% if parts %}
<h3>{% trans %}Parts list :{% endtrans %}</h3>

{% for part in parts %}
<div class="row bookelement">
    <h4 class="col w20">{{ part.title }}</h4>
    <div class="col w40 txtcenter cover">
        {{ part.content|truncate(60) }}
    </div>
    <div class="col w20">
        <ul>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.edit_part', part_id=part.id, book_id=book.id) }}"
                >{% trans %}Edit{% endtrans %}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.del_part', part_id=part.id, book_id=book.id) }}"
                >{% trans %}Delete{% endtrans %}
                </a>
            </li>
        </ul>
    </div>
    <div class="col w20">
        <ul>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='epub') }}"
                >{% trans %}Export Epub{% endtrans %}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='epub3') }}"
                >{% trans %}Export Epub3{% endtrans %}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='markdown') }}"
                >{% trans %}Export Markdown{% endtrans %}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='docx') }}"
                >{% trans %}Export Word{% endtrans %}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='odt') }}"
                >{% trans %}Export LibreOffice{% endtrans %}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='html') }}"
                >{% trans %}Export HTML{% endtrans %}
                </a>
            </li>
        </ul>
    </div>
</div>
{% endfor %}

<h4>{% trans %}Not enough parts ? Are you sad ? {% endtrans %}</h4>
<p class="bigger">
    <a href="{{ url_for('books.add_part', book_id=book.id) }}">
        {% trans%}Then add some parts !{% endtrans%}
    </a>
</p>
{% else %}
<h4>{% trans %}No parts ? Are you sad ? {% endtrans %}</h4>
<p class="bigger">
    <a href="{{ url_for('books.add_part', book_id=book.id) }}">
        {% trans%}Then add some parts !{% endtrans%}
    </a>
</p>
{% endif %}
{% endblock %}