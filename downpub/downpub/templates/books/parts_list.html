{% extends "base.html" %}
{% block content %}

<h2>{{ book.title }}</h2>
<div class="line w60 center bookelement">
    <div class="col w20 txtcenter cover">
        {% if book.cover %}
            <img src="{{ url_for('books.cover_get', book_id=book.id) }}" width="90px" alt="{{ book.title }}" />
            <br />
            <a class="icon icon-bracket2" href="{{ url_for('books.cover_delete', book_id=book.id) }}"
            >{{ _("Delete the cover for you book") }}
            </a>
        {% else %}
            <a class="icon icon-bracket2" href="{{ url_for('books.cover_add', book_id=book.id) }}"
            >{{ _("Add a cover for your book") }}
            </a>
        {% endif %}
    </div>
    <div class="col w20 bookexports">
        <ul>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='epub') }}"
                >{{ _("Export Epub") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='epub3') }}"
                >{{ _("Export Epub3") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='markdown') }}"
                >{{ _("Export Markdown") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='docx') }}"
                >{{ _("Export Word") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='odt') }}"
                >{{ _("Export LibreOffice") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export', book_id=book.id, export_format='html') }}"
                >{{ _("Export HTML") }}
                </a>
            </li>
        </ul>
    </div>
    <div class="col w20 booksinfo">
        <ul>
            <li class="row">
                <em class="icon icon-bracket2">{{ _("Created the ") }}
                {{ book.creation_date.strftime(' %d/%m/%Y  %H:%M') }}
            </em></li>
            <li class="row">
                <em class="icon icon-bracket2">{{ _("Last modified at ") }}
                {{ book.modified_at.strftime(' %d/%m/%Y  %H:%M') }}
            </em></li>
        <ul>
    </div>
</div>

{% if parts %}
<h3>{{ _("Parts list :") }}</h3>

{% for part in parts %}
<div class="line bookelement">
    <h4 class="col w20">{{ part.title }}</h4>
    <div class="col w40 txtcenter">
        {{ part.content|truncate(60) }}
    </div>
    <div class="col w20">
        <ul>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.edit_part', part_id=part.id, book_id=book.id) }}"
                >{{ _("Edit") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.del_part', part_id=part.id, book_id=book.id) }}"
                >{{ _("Delete") }}
                </a>
            </li>
        </ul>
    </div>
    <div class="col w20">
        <ul>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='epub') }}"
                >{{ _("Export Epub") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='epub3') }}"
                >{{ _("Export Epub3") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='markdown') }}"
                >{{ _("Export Markdown") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='docx') }}"
                >{{ _("Export Word") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='odt') }}"
                >{{ _("Export LibreOffice") }}
                </a>
            </li>
            <li class="row">
                <a class="icon icon-bracket2" href="{{ url_for('books.export_part', book_id=book.id, part_id=part.id, export_format='html') }}"
                >{{ _("Export HTML") }}
                </a>
            </li>
        </ul>
    </div>
</div>
{% endfor %}

<h4>{{ _("Not enough parts ? Are you sad ? ") }}</h4>
<p class="bigger">
    <a href="{{ url_for('books.add_part', book_id=book.id) }}">
        {{ _("Then add some parts !") }}
    </a>
</p>
{% else %}
<h4>{{ _("No parts ? Are you sad ? ") }}</h4>
<p class="bigger">
    <a href="{{ url_for('books.add_part', book_id=book.id) }}">
        {{ _("Then add some parts !") }}
    </a>
</p>
{% endif %}
{% endblock %}